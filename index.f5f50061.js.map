{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aAyFA,MAAMC,EAAU,IApFhB,MAcEC,mBAEE,aADuBH,EAAAI,QAAMC,IAAI,GAAGC,KAAKC,QAAQC,UAAWF,KAAKC,UACjDE,I,CAElBC,sBACE,GAAIC,UAAUC,YACZ,OAAOD,UAAUC,YAAYC,mBAAmBC,EAAWC,GAE3DC,MAAM,2C,CAGVC,oBAAoBR,GAClB,MAAMS,EAAiBC,SAASC,cAAc,YACxCC,EAAYf,KAAKgB,cAAchB,KAAKiB,UAEpCC,EAAS,mEAEOC,KAAKC,MAAMjB,EAAKkB,KAAKC,4EAEdnB,EAAKoB,QAAQ,GAAGF,+NAKpBlB,EAAKqB,wFAKOrB,EAAKoB,QAAQ,GAAGE,8GAKrDV,EAAUW,sDAGVX,EAAUY,YAAYZ,EAAUa,aAAab,EAAUc,6KAGvDjB,EAAekB,UAAYZ,C,CAE7BF,cAAce,GACZ,MAcMC,EAAW,IAAIC,KAAKF,GAS1B,MAPoB,CAClBL,UAjBW,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAiBtCM,EAASE,UACzBP,SAAUK,EAASG,UACnBN,SAAUG,EAASI,cACnBR,UAnBY,CACZ,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAQiBI,EAASK,Y,CA5E9BC,cACEtC,KAAKC,QAAU,CACbC,QALW,kDAMXqC,OAAQ,CACNC,IAAK,KACLC,IAAK,KACLC,MAAOC,EAAAC,KAAKC,QACZC,MAAO,WAGX9C,KAAKiB,SAAW,I,GA6EpB,SAAST,EAAUuC,GACjB,MAAMC,SAAEA,EAAQC,UAAEA,GAAcF,EAASG,OAEzCtD,EAAQqB,SAAW8B,EAASI,UAC5BvD,EAAQK,QAAQsC,OAAOC,IAAMQ,EAC7BpD,EAAQK,QAAQsC,OAAOE,IAAMQ,EAE7BrD,EACGwD,aACAC,MAAKC,IACJ1D,EAAQe,oBAAoB2C,EAAS,IAEtCC,OAAMC,GAAKC,QAAQC,IAAIF,I,CAG5B,SAAS/C,EAAQkD,GACfF,QAAQC,IAAI,eAAaC,E,CAlB3BC,iBAAiB,mBAAoBhE,EAAQQ","sources":["src/js/axios/axios-weather.js"],"sourcesContent":["import axios from 'axios';\nimport { KEYS } from '../axios/axiosDefaults';\n\nconst BASE_URL = 'https://api.openweathermap.org/data/2.5/weather';\n\nclass Weather {\n  constructor() {\n    this.options = {\n      baseURL: BASE_URL,\n      params: {\n        lat: null,\n        lon: null,\n        appid: KEYS.WEATHER,\n        units: 'metric',\n      },\n    };\n    this.userTime = null;\n  }\n\n  async getWeather() {\n    const response = await axios.get(`${this.options.baseURL}`, this.options);\n    return response.data;\n  }\n  checkNavPermissions() {\n    if (navigator.geolocation) {\n      return navigator.geolocation.getCurrentPosition(onSuccess, onError);\n    } else {\n      alert('Your browser not support geolocation api');\n    }\n  }\n  renderweatherMarkup(data) {\n    const weatherBlockEl = document.querySelector('.weather');\n    const localDate = this.dateFormatter(this.userTime);\n\n    const markup = `\n    <div class=\"weather__info info\">\n  <p class=\"info__temp\">${Math.floor(data.main.temp)}Â°</p>\n  <div class=\"info-wrapper\">\n    <p class=\"info__situation\">${data.weather[0].main}</p>\n    <div class=\"info-wrapper-items\">\n      <svg class=\"info-wrapper__svg\" width=\"18\" height=\"18\">\n        <use class=\"geo\" href=\"../images/icons.svg#icon-geo\"></use>\n      </svg>\n      <p class=\"info__geo\">${data.name}</p>\n    </div>\n  </div>\n</div>\n<img\n  src=\"http://openweathermap.org/img/w/${data.weather[0].icon}.png\"\n  alt=\"image of sun\"\n  width=\"128\"\n  class=\"weather-img\"\n/><p class=\"weather__date-week\">\n  ${localDate.dayOfWeek}\n</p>\n<p class=\"weather__date-date\">\n  ${localDate.dateUser} ${localDate.dateMonth} ${localDate.dateYear}\n</p>\n<a class=\"weather__link\" href=\"https://weather.com/weather/tenday/l/35a741555bbfc8bc576be864b0b64af6d1b2ad1328d2ee729f0de0ae00098e85\">weather for week</a>`;\n    weatherBlockEl.innerHTML = markup;\n  }\n  dateFormatter(date) {\n    const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\n    const month = [\n      'Jan',\n      'Feb',\n      'Mar',\n      'Apr',\n      'May',\n      'Jun',\n      'Jul',\n      'Aug',\n      'Sep',\n      'Nov',\n      'Dec',\n    ];\n    const userDate = new Date(date);\n\n    const weatherDate = {\n      dayOfWeek: days[userDate.getDay()],\n      dateUser: userDate.getDate(),\n      dateYear: userDate.getFullYear(),\n      dateMonth: month[userDate.getMonth()],\n    };\n\n    return weatherDate;\n  }\n}\n\nconst weather = new Weather();\n\naddEventListener('DOMContentLoaded', weather.checkNavPermissions);\n\nfunction onSuccess(position) {\n  const { latitude, longitude } = position.coords;\n\n  weather.userTime = position.timestamp;\n  weather.options.params.lat = latitude;\n  weather.options.params.lon = longitude;\n\n  weather\n    .getWeather()\n    .then(response => {\n      weather.renderweatherMarkup(response);\n    })\n    .catch(e => console.log(e));\n}\n\nfunction onError(error) {\n  console.log('error -->', error);\n}\n"],"names":["$2shzp","parcelRequire","$168a6eac2a412940$var$weather","async","default","get","this","options","baseURL","data","checkNavPermissions","navigator","geolocation","getCurrentPosition","$168a6eac2a412940$var$onSuccess","$168a6eac2a412940$var$onError","alert","renderweatherMarkup","weatherBlockEl","document","querySelector","localDate","dateFormatter","userTime","markup","Math","floor","main","temp","weather","name","icon","dayOfWeek","dateUser","dateMonth","dateYear","innerHTML","date","userDate","Date","getDay","getDate","getFullYear","getMonth","constructor","params","lat","lon","appid","$4Vbr3","KEYS","WEATHER","units","position","latitude","longitude","coords","timestamp","getWeather","then","response","catch","e","console","log","error","addEventListener"],"version":3,"file":"index.f5f50061.js.map"}